<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>StreamHub Deck by cheung31</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="https://raw.github.com/gobengo/streamhub-backbone/master/main.css">
    <link rel="stylesheet" type="text/css" href="streamhub-deck/main.css">
    <script src="http://zor.t402.livefyre.com/wjs/v3.0.sdk/javascripts/livefyre.js"></script>
    <script src="streamhub-deck/streamhub-deck.almond.js"></script>
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>StreamHub Deck</h1>
        <p>Add a &quot;TweetDeck&quot;-esque columned widget of Livefyre StreamHub content to your website.</p>

        <p class="view"><a href="https://github.com/cheung31/streamhub-deck">View the Project on GitHub <small>cheung31/streamhub-deck</small></a></p>


        <ul>
          <li><a href="https://github.com/cheung31/streamhub-deck/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/cheung31/streamhub-deck/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/cheung31/streamhub-deck">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>

<style>
    .shadow {
        -moz-box-shadow:    inset 0 0 5px #999;
        -webkit-box-shadow: inset 0 0 5px #999;
        box-shadow:         inset 0 0 5px #999;
    }
    #demo {
        width: 100%;
        height: 400px;
        margin-bottom: 25px;
        padding: 10px;
        font-family: Helvetica, Arial, sans-serif;
    }

    .deck-col-heading h1 {
        color: #FFF;
        padding: 0 10px;
        margin: 10px 0;
        font-size: 16px;
        
    }
    .deck-col-heading {
        background: #555;
        -webkit-border-top-left-radius: 5px;
        -webkit-border-top-right-radius: 5px;
        -moz-border-radius-topleft: 5px;
        -moz-border-radius-topright: 5px;
        border-top-left-radius: 5px;
        border-top-right-radius: 5px;
        border-bottom: 1px solid #222;
    }
    a.fyre-hashtag,
    a.fyre-mention,
    a.fyre-twitter-mention,
    .hub-body-html a,
    .twt-actions a {
        color: #6795ba;
    }
    .twt-actions li {
        list-style: none;
        float: left;
        margin-left: 15px;
    }
    .feed {
        border-top: 1px solid #222;
    }
    .hub-actions {
        float: right;
        position: relative;
        top: -50px;
    }
    .feed .hub-item {
        padding: 10px;
        color: #DDD;
        background: #333;
        border-right: 1px solid #555;
        border-left: 1px solid #555;
        border-bottom: 1px solid #555;
    }
    .hub-byline {
        display: block;
        position: relative;
        top: -55px;
        padding-left: 60px;
    }
    .hub-byline > img {
        float: right;
        margin-left: 10px;
    }
    .hub-author {
        color: #FFF;
        font-weight: bold;
    }
    .hub-avatar img {
        border-radius: 3px;
        -webkit-border-radius: 3px;
        border-radius: 3px;
    }
    .hub-timestamp {
        color: #999;
        float: right;
    }
    .hub-body {
        padding-left: 60px;
        position: relative;
        top: -70px;
    }
    .hub-body-html, .hub-actions {
        font-size: 13px;
    }
</style>

<h2>Demo</h2>
<div id="demo" class="shadow"></div>
<script type="text/javascript">
// Now to load the example
require(['streamhub-backbone',
         'streamhub-deck',
         'streamhub-deck/views/DeckFeedView',
         'mustache',
         'text!streamhub-deck/templates/TwitterContent.html',
         'config',
         'jquery'],
function(Hub, DeckView, DeckFeedView, Mustache, TwitterContentTemplate, deckConfig, $) {
    function loadApp (sdk) {
        // Source-specific templates used by Deck View, etc. (e.g. RSS templates, Twitter templates)
        // Supported sources and their templates
        var sources = {
            twitter: {
                template: function (d) {
                    // Attempt to set the tweet_id for the template
                    var content_id = d.id;
                    if (content_id) {
                        d.tweet_id = content_id.split('@twitter.com')[0].substring('tweet-'.length);
                    }
                    // Attempt to get photo attachment
                    if (d.attachments && d.attachments[0].thumbnail_url) {
                        d.image_url = d.attachments[0].thumbnail_url;
                    }
                    return Mustache.compile(TwitterContentTemplate)(d);
                }
            },
            rss: {
                template: function (d) {
                    return Mustache.compile(InstagramHtml)(d);
                }
            }
        };

        // Initialize DeckView, with multiple collections (articleId's)
        var collections = [];
        for (var i = 0; i < deckConfig.collections.length; i++) {
            var collectionMeta = deckConfig.collections[i];
            var col = new Hub.Collection().setRemote({
                sdk: sdk,
                siteId: collectionMeta.siteId,
                articleId: collectionMeta.articleId
            });
            $.extend(col, collectionMeta);
            collections.push(col);
        }

        // Initialize DeckView with collections
        var view = new DeckView({
            el: document.getElementById("demo"),
            collections: collections,
            feedView: DeckFeedView,
            sources: sources
        });
        view.render();

        //// Calculate proper deck scroll width
        var col_width = 307;
        //var viewport_width = $(window).width();
        $('.deck-columns').css('width', ((collections.length+1) * col_width) + ($('.deck-col').eq(0).offset().left) * collections.length);
    }

    fyre.conv.load({
        network: "labs-t402.fyre.co"
    }, [{app: 'sdk'}], loadApp);
});
</script>

<h2>Example Usage</h2>
<h4>Configuring StreamHub collections to appear in Deck columns</h4>
<p>
    You can specify the StreamHub collections that will appear in the Deck
    columns, and the title/heading that will appear above each corresponding
    Deck column in config.js.
</p>
<pre><code>
define({
    collections: [
        {
            siteId: 303827,
            articleId: 'scoreboard_demo_0',
            headingTitle: 'Title 1',
            youtubeId: 'ESEdOAQuYQ4'
        },
        {
            siteId: 303827,
            articleId: 'feed_ticker_0',
            headingTitle: 'Title 2',
            youtubeId: 'mHXx7HCibEg'
        }
    ]
});
</code></pre>

<h4>Rendering the DeckView</h4>
<pre><code>
// Source-specific templates used by Deck View, etc. (e.g. RSS templates, Twitter templates)
// Supported sources and their templates
var sources = {
    twitter: {
        template: function (d) {
            // Attempt to set the tweet_id for the template
            var content_id = d.id;
            if (content_id) {
                d.tweet_id = content_id.split('@twitter.com')[0].substring('tweet-'.length);
            }
            // Attempt to get photo attachment
            if (d.attachments && d.attachments[0].thumbnail_url) {
                d.image_url = d.attachments[0].thumbnail_url;
            }
            return Mustache.compile(TwitterContentTemplate)(d);
        }
    },
    rss: {
        template: function (d) {
            return Mustache.compile(InstagramHtml)(d);
        }
    }
};

// Initialize DeckView, with multiple collections (articleId's)
var collections = [];
for (var i = 0; i < deckConfig.collections.length; i++) {
    var collectionMeta = deckConfig.collections[i];
    var col = new Hub.Collection().setRemote({
        sdk: sdk,
        siteId: collectionMeta.siteId,
        articleId: collectionMeta.articleId
    });
    $.extend(col, collectionMeta);
    collections.push(col);
}

// Initialize DeckView with collections
var view = new DeckView({
    el: document.getElementById("demo"),
    collections: collections,
    feedView: DeckFeedView,
    sources: sources
});
view.render();
</code></pre>

<h2>What is Livefyre StreamHub?</h2>

<p><a href="http://www.livefyre.com/streamhub/">Livefyre StreamHub</a> is the web's first Engagement Management System. StreamHub turns your site into a real-time social experience. Curate images, videos, and Tweets from across the social web, right into live blogs, chats, widgets, and dashboards. The world's biggest publishers and brands use StreamHub to power their online Content Communities.</p>

<h2>What is StreamHub Deck?</h2>

<p>StreamHub Deck is a widget that can be plugged into your website to display the social content provided by Livefyre StreamHub. As seen in the screenshots above, you can create a TweetDeck-like layout of tweets for various topics relevant to your website/app.</p>

<blockquote>
<p>The StreamHub Deck with a custom header (title and Youtube video) and tweets as content.
<img src="http://d.pr/i/CzlK+" alt="StreamHub Deck"></p>

<p>The StreamHub Deck as used in the [Livefyre Super Bowl NewsHub](http://superbowl.livefyre.com/#/commercials)
<img src="http://d.pr/i/1vpB+" alt="Super Bowl NewsHub Deck"></p>
</blockquote>

<h2>Authors and Contributors</h2>

<p>2013, Ryan Cheung (<a href="https://github.com/cheung31" class="user-mention">@cheung31</a>), Ben Goering (<a href="https://github.com/bengo" class="user-mention">@bengo</a>) for Livefyre Labs.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/cheung31">cheung31</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    <!-- GA -->
    <script type="text/javascript">
    var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-38120262-7']);
        _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script');
        ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
     })();
    </script>
  </body>
</html>
